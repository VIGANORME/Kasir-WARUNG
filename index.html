<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Kasir Mobile — Premium UI</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f0f4ff;
  --glass:rgba(255,255,255,0.55);
  --glass-2:rgba(255,255,255,0.25);
  --primary-1:#4d73ff;
  --primary-2:#6aa0ff;
  --accent:#4d73ff;
  --muted:#7580a6;
  --card:#ffffff;
  --radius:16px;
  --shadow:0 10px 30px rgba(15,31,86,0.12);
  --glass-border:rgba(255,255,255,0.7);
  --text:#0f1724;
  --success:#1fbf66;
  --card-glow: rgba(77,115,255,0.06);
}

/* DARK THEME */
html.dark{
  --bg:#0e1117;
  --glass:rgba(255,255,255,0.04);
  --glass-2:rgba(255,255,255,0.02);
  --card:#141820;
  --text:#f3f6ff;
  --muted:#9aa3c2;
  --glass-border:rgba(255,255,255,0.08);
  --card-glow: rgba(77,115,255,0.025);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,Arial,sans-serif;
  background:
    radial-gradient(1200px 400px at 10% 10%, rgba(77,115,255,0.06), transparent 10%),
    radial-gradient(800px 300px at 90% 90%, rgba(106,160,255,0.05), transparent 10%),
    var(--bg);
  color:var(--text);
  padding-bottom:80px;
  transition: background 0.35s ease, color 0.35s ease;
}
.app{
  max-width:1100px;
  margin:18px auto;
  padding:18px;
  display:grid;
  grid-template-columns: 1fr 420px;
  gap:18px;
}

/* Header */
.header{
  grid-column:1/-1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  background:var(--glass);
  border-radius:20px;
  padding:14px 18px;
  box-shadow:var(--shadow);
  backdrop-filter:blur(8px) saturate(120%);
  border:1px solid var(--glass-border);
}
.brand{display:flex;gap:12px;align-items:center}
.logo{
  width:44px;height:44px;border-radius:10px;
  background:linear-gradient(135deg,var(--primary-1),var(--primary-2));
  display:flex;align-items:center;justify-content:center;color:white;font-weight:800;
}
.title{font-size:18px;font-weight:700}
.controls{display:flex;gap:10px;align-items:center}

.search{
  width:320px;
  background:var(--glass);
  border-radius:12px;
  padding:8px 12px;
  display:flex;align-items:center;gap:8px;border:1px solid var(--glass-border);
}
.search input{border:0;background:transparent;outline:0;width:100%;font-size:14px;color:var(--text)}
.icon-btn{background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer}
.icon-btn svg{width:20px;height:20px;opacity:0.95}

/* Products */
.products{
  background:linear-gradient(180deg,rgba(255,255,255,0.92),rgba(255,255,255,0.82));
  border-radius:20px;padding:18px;border:1px solid var(--glass-border);
  box-shadow:var(--shadow);
}
.products h3{margin:0 0 12px 0;font-size:16px}
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
}

/* Card */
.card{
  position:relative;
  background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);
  border-radius:14px;padding:12px;border:1px solid rgba(15,31,86,0.04);
  display:flex;flex-direction:column;gap:8px;
  cursor:pointer;transition:transform .15s,box-shadow .15s,background .35s;
}
.card .name{font-weight:700;font-size:14px}
.card .price{font-size:13px;color:var(--muted)}

.card .del-btn{
  position:absolute;
  top:8px;
  right:8px;
  width:30px;height:30px;border-radius:8px;
  background:rgba(255,255,255,0.92);
  border:1px solid rgba(0,0,0,0.06);
  display:flex;align-items:center;justify-content:center;
  font-weight:800;color:#b91c1c;
  box-shadow:0 6px 12px rgba(0,0,0,0.06);
  opacity:0;transform:scale(.9);
  transition:opacity .18s ease, transform .18s ease;
  pointer-events:none;
}

.card.show-delete .del-btn{
  opacity:1;transform:scale(1);pointer-events:auto;
}

/* Pressed state */
.card.pressed{outline:2px solid rgba(77,115,255,0.12);transform:translateY(-4px)}
.card.show-delete::after{
  content:"Tekan × untuk hapus";
  position:absolute;left:12px;bottom:3.5px;font-size:11px;color:var(--muted);
}

/* BUTTONS */
.add-btn{
  background:linear-gradient(90deg,var(--primary-1),var(--primary-2));
  color:white;border:0;padding:10px 12px;border-radius:12px;cursor:pointer;font-weight:700
}

.right{position:relative;display:flex;flex-direction:column;gap:18px}
.panel{
  background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);
  border-radius:18px;padding:16px;border:1px solid rgba(15,31,86,0.04);
  box-shadow:var(--shadow);
}

.cart-head{display:flex;justify-content:space-between;align-items:center;gap:12px}
.cart-list{margin-top:12px;display:flex;flex-direction:column;gap:10px;max-height:360px;overflow:auto;padding-right:6px}
.cart-item{
  display:flex;justify-content:space-between;align-items:center;gap:12px;padding:10px;border-radius:12px;background:var(--glass);
  border:1px solid var(--glass-border);
}
.qty{display:flex;gap:6px;align-items:center}
.qty button{background:transparent;border:1px solid var(--glass-border);padding:6px 8px;border-radius:8px;cursor:pointer}

.summary{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.row-between{display:flex;justify-content:space-between;align-items:center}
.input input{padding:12px;border-radius:12px;border:1px solid rgba(15,31,86,0.06);outline:0;background:transparent;width:100%;margin-bottom:8px;}

.paybar{position:sticky;bottom:18px;background:linear-gradient(180deg,#fff,rgba(255,255,255,0.95));padding:12px;border-radius:14px;border:1px solid rgba(15,31,86,0.04)}
.pay-button{flex:1;padding:12px;border-radius:12px;border:0;background:linear-gradient(90deg,#2e64ff,#4d73ff);color:white;font-weight:800;cursor:pointer}

/* Modal */
.modal-bg{position:fixed;inset:0;background:rgba(5,10,25,0.45);display:flex;align-items:center;justify-content:center;z-index:9999}
.modal-card{width:92%;max-width:420px;background:var(--card);border-radius:14px;padding:18px;border:1px solid var(--glass-border);box-shadow:var(--shadow)}
.struk{font-family:monospace;font-size:13px;background:linear-gradient(180deg,#fff,#fbfdff);padding:14px;border-radius:10px;border:1px dashed rgba(15,31,86,0.06)}
.struk h4{text-align:center;margin:0 0 8px 0}

/* print */
@media print{body>*{display:none}#print-only{display:block;position:fixed;left:0;top:0;width:100%}}

@media (max-width:980px){
  .app{grid-template-columns:1fr;padding:12px}
  .search{width:160px}
}
</style>
</head>
<body>

<div class="app">

  <div class="header">
    <div class="brand">
      <div class="logo">KW</div>
      <div>
        <div class="title">Warung SHADOW</div>
        <div class="tiny">kasir</div>
      </div>
    </div>

    <div class="controls">
      <div class="search">
        <svg width="16" height="16"><circle cx="11" cy="11" r="5" stroke="#6a75a3" stroke-width="1.6"/><path d="M21 21l-4.35-4.35" stroke="#6a75a3" stroke-width="1.6"/></svg>
        <input id="searchBox" placeholder="Cari menu..." oninput="filterProducts(this.value)" />
      </div>

      <button id="moonBtn" class="icon-btn" onclick="toggleDark()">
        <svg viewBox="0 0 24 24" fill="none"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.3"/></svg>
      </button>
    </div>
  </div>

  <div class="products" id="productArea">
    <h3>Produk</h3>
    <div class="grid" id="productGrid"></div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button class="add-btn" onclick="renderAddMenu()">Tambah Menu</button>
    </div>
  </div>

  <div class="right">
    <div class="panel">
      <div class="cart-head">
        <div><strong>Keranjang</strong><div class="tiny">Tambah / Kurangi jumlah</div></div>
        <div class="muted" id="itemCount">0 item</div>
      </div>

      <div class="cart-list" id="cartList"></div>

      <div class="summary">
        <div class="row-between"><div class="muted">Total</div><div style="font-weight:800;font-size:18px">Rp <span id="liveTotal">0</span></div></div>

        <div class="input">
          <input id="buyer" placeholder="Nama Pemesan (wajib)" />
          <input id="cash" type="number" placeholder="Uang Dibayar" oninput="updateKembalian()" />
          <div class="row-between"><div class="muted">Kembalian</div><div style="font-weight:700;color:var(--success)">Rp <span id="kembalian">0</span></div></div>
        </div>
      </div>
    </div>

    <div class="panel paybar">
      <div class="pay-row">
        <div style="flex:1">
          <div class="tiny">Total saat ini</div>
          <div style="font-weight:800;font-size:18px">Rp <span id="payTotal">0</span></div>
        </div>
        <div style="width:220px;display:flex;gap:8px">
          <button class="pay-button" onclick="checkout()">Bayar Sekarang</button>
          <button onclick="openTransactions()" style="background:#fff;border:1px solid rgba(15,31,86,0.06)">Riwayat</button>
        </div>
      </div>
    </div>

    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div><strong>Laporan</strong><div class="tiny">Ringkasan</div></div>
      </div>
      <div class="row-between"><div class="muted">Hari ini</div><div id="harian">Rp 0</div></div>
      <div class="row-between"><div class="muted">Bulan ini</div><div id="bulanan">Rp 0</div></div>
    </div>
  </div>
</div>

<div id="modalRoot" style="display:none"></div>
<div id="print-only" style="display:none"></div>

<script>
/* Helpers */
function rp(x){ x = Number(x)||0; return Math.floor(x).toString().replace(/\B(?=(\d{3})+(?!\d))/g,'.') }
function save(k,v){ localStorage.setItem(k,JSON.stringify(v)) }
function load(k,d){ return JSON.parse(localStorage.getItem(k)||JSON.stringify(d)) }

let products = load('products',[])
let cart = load('cart',[])
let transactions = load('transactions',[])
let isDark = load('kasir_dark_mode', false)

/* PATCH: Inisialisasi properti 'sold' pada produk jika belum ada, default 0 */
products = products.map(p => ({
  ...p,
  sold: p.sold === undefined ? 0 : p.sold
}));
save('products', products);

document.documentElement.classList.toggle('dark', !!isDark)

/* PATCH: fungsi baru */
function hideAllDeleteButtons(){
  document.querySelectorAll('.card').forEach(c=>{
    c.classList.remove('show-delete')
  })
}

/* Render products */
function renderProducts(list){
  const grid = document.getElementById('productGrid')
  grid.innerHTML = ''
  list.forEach((p,i)=>{
    const div = document.createElement('div')
    div.className = 'card'
    div.dataset.index = i

    /* PATCH: Tambahkan jumlah sold ke dalam card */
    div.innerHTML = `
      <div class="name">${p.name}</div>
      <div class="price">Rp ${rp(p.price)}</div>
      <div style="font-size:11px; color:var(--success); font-weight:600">Terjual: ${p.sold}</div>
      <div class="del-btn">×</div>
    `

    let timer = null
    let longPressed = false

    function onPointerDown(e){
      e.preventDefault()
      longPressed = false
      div.classList.add('pressed')
      timer = setTimeout(()=>{
        longPressed = true
        div.classList.add('show-delete')
        div.classList.remove('pressed')
      }, 500)
    }
    function onPointerUp(e){
      div.classList.remove('pressed')
      if(timer) clearTimeout(timer)
      if(!longPressed){
        const productIndex = products.findIndex(item => item.name === p.name);
        addToCart(productIndex)
      }
    }
    function onPointerLeave(){
      div.classList.remove('pressed')
      if(timer) clearTimeout(timer)
    }

    div.addEventListener('pointerdown', onPointerDown)
    div.addEventListener('pointerup', onPointerUp)
    div.addEventListener('pointercancel', onPointerLeave)
    div.addEventListener('pointerleave', onPointerLeave)

    /* PATCH: delete button now hide delete mode if cancel */
    const delBtn = div.querySelector('.del-btn')
    delBtn.addEventListener('click', (ev)=>{
      ev.stopPropagation()
      // Cari index produk di array products asli, karena list bisa hasil filter
      const idx = products.findIndex(item => item.name === p.name) 
      if(confirm('Hapus menu "'+products[idx].name+'"?')){
        deleteProduct(idx)
      } else {
        hideAllDeleteButtons()
      }
    })

    grid.appendChild(div)
  })
}

function deleteProduct(i){
  products.splice(i,1)
  save('products',products)
  refreshUI()
}

/* PATCH: Fungsi untuk menampilkan Best Sellers */
function renderBestSellers() {
  const productArea = document.getElementById('productArea');
  let bestSellerDiv = document.getElementById('bestSellerSection');

  // Urutkan produk berdasarkan jumlah terjual (sold) secara menurun
  const bestSellers = [...products].sort((a, b) => b.sold - a.sold).slice(0, 3);
  
  // Jika belum ada, buat elemen Best Seller
  if (!bestSellerDiv) {
    bestSellerDiv = document.createElement('div');
    bestSellerDiv.id = 'bestSellerSection';
    bestSellerDiv.style.marginBottom = '18px';
    // Sisipkan sebelum <h3>Produk</h3>
    productArea.insertBefore(bestSellerDiv, productArea.children[0]); 
  }

  // Hanya tampilkan jika ada produk yang terjual (sold > 0)
  const filteredBestSellers = bestSellers.filter(p => p.sold > 0);

  if (filteredBestSellers.length === 0) {
    bestSellerDiv.style.display = 'none';
    return;
  }
  
  bestSellerDiv.style.display = 'block';

  bestSellerDiv.innerHTML = `
    <h3 style="margin-top:0">⭐ Best Seller</h3>
    <div class="grid" style="grid-template-columns:repeat(auto-fill,minmax(120px,1fr));">
      ${filteredBestSellers.map(p => `
        <div class="card" style="padding:8px; display:block; background:rgba(77,115,255,0.06); border-color:rgba(77,115,255,0.12)">
          <div class="name" style="font-size:12px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis">${p.name}</div>
          <div style="font-size:11px; color:var(--muted)">Terjual: <span style="font-weight:700; color:var(--text)">${p.sold}</span></div>
        </div>
      `).join('')}
    </div>
  `;
}

/* UI refresh */
function refreshUI(){
  renderProducts(products)
  renderCart()
  updateIncome()
  renderBestSellers() // PATCH: Panggil Best Seller saat refresh
  document.getElementById('payTotal').textContent = rp(calcTotal())
}

function filterProducts(q){
  q=(q||'').toLowerCase()
  if(!q) renderProducts(products)
  else renderProducts(products.filter(p=>p.name.toLowerCase().includes(q)))
}

function renderAddMenu(){
  const modal = modalCard(`
    <div style="display:flex;flex-direction:column;gap:10px">
      <h3>Tambah Menu</h3>
      <input id="mname" placeholder="Nama menu" />
      <input id="mprice" type="number" placeholder="Harga" />
      <div style="display:flex;gap:8px">
        <button class="add-btn" onclick="saveMenuModal()">Simpan</button>
        <button onclick="closeModal()">Batal</button>
      </div>
    </div>
  `)
  showModal(modal)
}
function saveMenuModal(){
  const n = document.getElementById('mname').value.trim()
  const h = Number(document.getElementById('mprice').value)
  if(!n||!h) return alert('Isi nama dan harga')
  /* PATCH: Tambahkan properti sold: 0 saat menu baru dibuat */
  products.push({name:n,price:h,sold:0})
  save('products',products)
  closeModal()
  refreshUI()
}

/* Cart */
function addToCart(i){
  const p = products[i]
  const f = cart.find(c=>c.name===p.name)
  if(f) f.qty++
  else cart.push({name:p.name,price:p.price,qty:1})
  save('cart',cart)
  renderCart()
}

function renderCart(){
  const list = document.getElementById('cartList')
  list.innerHTML = cart.length===0 ? '<div class="center muted">Keranjang kosong</div>' :
  cart.map((c,i)=>`
    <div class="cart-item">
      <div>
        <div style="font-weight:700">${c.name}</div>
        <div class="tiny">Rp ${rp(c.price)} × ${c.qty} = Rp ${rp(c.price*c.qty)}</div>
      </div>
      <div class="qty">
        <button onclick="decQty(${i})">-</button>
        <span style="padding:6px 10px;border-radius:8px;border:1px solid rgba(15,31,86,0.04);min-width:36px;text-align:center">${c.qty}</span>
        <button onclick="incQty(${i})">+</button>
      </div>
    </div>
  `).join('')

  document.getElementById('itemCount').textContent = cart.reduce((s,c)=>s+c.qty,0)+' item'
  document.getElementById('liveTotal').textContent = rp(calcTotal())
  document.getElementById('payTotal').textContent = rp(calcTotal())
  updateKembalian()
}
function incQty(i){ cart[i].qty++; save('cart',cart); renderCart() }
function decQty(i){ cart[i].qty--; if(cart[i].qty<=0) cart.splice(i,1); save('cart',cart); renderCart() }
function calcTotal(){ return cart.reduce((a,b)=>a+(b.price*b.qty),0) }

function updateKembalian(){
  const cash = Number(document.getElementById('cash').value||0)
  const total = calcTotal()
  const back = cash - total
  document.getElementById('kembalian').textContent = back>0 ? rp(back) : '0'
}

function checkout(){
  if(cart.length===0) return alert('Keranjang kosong')
  const name = (document.getElementById('buyer').value||'').trim()
  if(!name) return alert('Isi nama pemesan')
  const total = calcTotal()
  const cashValue = Number(document.getElementById('cash').value||0)
  if(cashValue < total) return alert('Uang kurang')
  const back = cashValue - total
  const time = new Date().toLocaleString('id-ID')
  
  /* PATCH: Update jumlah 'sold' pada produk */
  cart.forEach(cartItem => {
    const productIndex = products.findIndex(p => p.name === cartItem.name);
    if (productIndex !== -1) {
      products[productIndex].sold += cartItem.qty;
    }
  });
  save('products', products);
  
  transactions.push({ name, total, time, items: cart.map(c=>({...c})) })
  save('transactions', transactions)
  save('cart', [])
  cart = []
  
  // Clear input fields after successful checkout
  document.getElementById('buyer').value = '';
  document.getElementById('cash').value = '';

  renderCart()
  showStruk(name, total, cashValue, back, transactions.at(-1))
  refreshUI()
}

/* Struk */
function showStruk(nama,total,bayar,kembali,tx){
  const itemsHtml = tx.items.map(it=>`
    <div style="display:flex;justify-content:space-between">
      <div>${it.name} x${it.qty}</div>
      <div>Rp ${rp(it.price*it.qty)}</div>
    </div>`).join('')
  showModal(`
    <div class="modal-card">
      <h3>Struk Pembelian</h3>
      <div class="struk" id="strukArea">
        <h4>WARUNG KOPI</h4>
        <div class="line"><div class="tiny">Nama:</div><div>${nama}</div></div>
        ${itemsHtml}
        <hr/>
        <div class="line"><div class="tiny">Total</div><div>Rp ${rp(total)}</div></div>
        <div class="line"><div class="tiny">Dibayar</div><div>Rp ${rp(bayar)}</div></div>
        <div class="line"><div class="tiny">Kembalian</div><div>Rp ${rp(kembali)}</div></div>
      </div>
      <div style="display:flex;gap:8px;margin-top:12px">
        <button class="add-btn" onclick="printStruk()">Print</button>
        <button onclick="closeModal()">Tutup</button>
      </div>
    </div>
  `)
}
function printStruk(){
  const el = document.getElementById('strukArea')
  const w = window.open('','_blank','width=400,height=600')
  w.document.write(`<html>
    <head><style>
      body{font-family:monospace;font-size:13px;padding:10px}
      .line{display:flex;justify-content:space-between}
      .tiny{font-size:11px}
      hr{border:0;border-top:1px dashed #000;margin:8px 0}
      h4{text-align:center;margin:0 0 8px 0}
      @media print {
        @page { margin: 10mm; }
        body { padding: 0; }
      }
    </style></head>
    <body>${el.innerHTML}</body>
  </html>`)
  w.document.close(); w.print(); w.close()
}

function updateIncome(){
  const today = new Date().toLocaleDateString('id-ID')
  const now = new Date()
  const m = now.getMonth()+1, y = now.getFullYear()
  const harian = transactions.filter(t=>t.time.startsWith(today)).reduce((s,i)=>s+i.total,0)
  // Menghitung bulanan, menggunakan manipulasi string yang lebih aman berdasarkan format toLocaleString('id-ID')
  const bulanan = transactions.filter(t=>{
    const timeParts = t.time.split(',')[0]; 
    // Format id-ID biasanya d/m/yyyy, kita perlu parse ini
    const parts = timeParts.split('/');
    if(parts.length < 3) return false;
    const [d, mon, year] = parts.map(Number);
    // Date constructor: new Date(year, monthIndex, day)
    const dTx = new Date(year, mon - 1, d); 
    
    return dTx.getMonth()+1===m && dTx.getFullYear()===y
  }).reduce((s,i)=>s+i.total,0)

  document.getElementById('harian').textContent = 'Rp '+rp(harian)
  document.getElementById('bulanan').textContent = 'Rp '+rp(bulanan)
}

/* Modal */
function modalCard(html){ return html }
function showModal(html){
  document.getElementById('modalRoot').innerHTML =
    `<div class="modal-bg"><div class="modal-card">${html}</div></div>`
  document.getElementById('modalRoot').style.display='block'
}
function closeModal(){
  const root=document.getElementById('modalRoot')
  root.innerHTML=''
  root.style.display='none'
}

/* Transactions */
function openTransactions(){
  const html = `<h3>Riwayat Transaksi</h3><div style="max-height:360px;overflow:auto">${
    transactions.length===0 ? '<div class="muted center">Belum ada transaksi</div>' :
    transactions.map((t,i)=>`<div style="padding:10px;border-bottom:1px solid rgba(15,31,86,0.04);display:flex;justify-content:space-between;"><div><div style="font-weight:700">${t.name}</div><div class="tiny">${t.time}</div></div><div style="text-align:right"><div>Rp ${rp(t.total)}</div><button onclick="viewTx(${i})">Lihat</button></div></div>`).join('')
  }</div><button onclick="closeModal()" style="margin-top:12px">Tutup</button>`
  showModal(html)
}

function viewTx(i){
  const t = transactions[i]
  const items = t.items.map(it=>`<div style="display:flex;justify-content:space-between"><div>${it.name} x${it.qty}</div><div>Rp ${rp(it.price*it.qty)}</div></div>`).join('')
  showModal(`<h3>Transaksi</h3><div class="struk"><div class="line"><div class="tiny">Waktu</div><div>${t.time}</div></div><div class="line"><div class="tiny">Nama</div><div>${t.name}</div></div>${items}<hr/><div class="line"><div>Total</div><div>Rp ${rp(t.total)}</div></div></div><div style="display:flex;gap:8px;margin-top:12px"><button class="add-btn" onclick="printTx(${i})">Print</button><button onclick="closeModal()">Tutup</button></div>`)
}

function printTx(i){
  const t = transactions[i]
  const items = t.items.map(it=>`<div style="display:flex;justify-content:space-between"><div>${it.name} x${it.qty}</div><div>Rp ${rp(it.price*it.qty)}</div></div>`).join('')
  const html = `<div style="font-family:monospace;padding:12px"><h4 style="text-align:center">WARUNG KOPI</h4>${items}<hr/><div style="display:flex;justify-content:space-between"><div>Total</div><div>Rp ${rp(t.total)}</div></div></div>`
  const w = window.open('','_blank','width=400,height=600')
  w.document.write(html)
  w.document.close(); w.print(); w.close()
}

/* Dark mode */
function toggleDark(){
  isDark = !isDark
  document.documentElement.classList.toggle('dark', isDark)
  save('kasir_dark_mode', isDark)
}

/* Init */
refreshUI()

</script>

</body>
</html>
